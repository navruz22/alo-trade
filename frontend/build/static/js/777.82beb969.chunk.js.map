{"version":3,"file":"static/js/777.82beb969.chunk.js","mappings":"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","sources":["Components/OfferChat/ChatUser.js","Components/OfferChat/ProductData.js","Components/OfferChat/ChatIncomingMessage.js","Components/OfferChat/ChatSendingMessage.js","Components/OfferChat/ChatInput.js","Config/socket.js","Pages/User/Offers/Offers.js"],"sourcesContent":["import React from \"react\";\r\nimport { IoArrowDownOutline, IoArrowUpOutline } from \"react-icons/io5\";\r\n\r\nconst ChatUser = ({ offer, user, changeOffer }) => {\r\n  const _id = user?._id;\r\n  const { order, product, messages, createdAt, offererUser } = offer;\r\n  const name = order ? order.name : product ? product.name : \"\";\r\n  const { message, isRead, user: chatUser } = messages;\r\n  const image = order ? order.images[0] : product ? product.images[0] : null;\r\n  const isUser = offererUser._id === _id;\r\n  const isNew = chatUser !== user?._id && !isRead;\r\n\r\n  return (\r\n    <div\r\n      onClick={changeOffer}\r\n      className=\"bg-white flex items-center hover:bg-grey-lighter cursor-pointer flex-row border-b pl-3\"\r\n    >\r\n      <div>\r\n        {image ? (\r\n          <img\r\n            alt={\"alotrade.uz\"}\r\n            className=\"h-12 w-12 rounded-full\"\r\n            src={image}\r\n          />\r\n        ) : (\r\n          <div className=\"h-12 w-12 rounded-full border-dashed bg-neutral-200 flex items-center justify-center\">\r\n            IMG\r\n          </div>\r\n        )}\r\n      </div>\r\n      <div className=\"ml-4 flex-1 py-4 pr-2\">\r\n        <div className=\"flex items-bottom justify-between\">\r\n          <p className=\"text-neutral-500 font-amazonbold h-6 overflow-hidden\">\r\n            {name}\r\n          </p>\r\n          <p className=\"text-xs text-neutral-600\">\r\n            {new Date(createdAt).toLocaleDateString()}\r\n          </p>\r\n        </div>\r\n        <div className=\"flex justify-between items-center\">\r\n          <p className=\"text-neutral-500 mt-1 text-sm h-6 overflow-hidden\">\r\n            {message && message}\r\n          </p>\r\n          {isNew && (\r\n            <p className=\"text-[10px] bg-green-500 px-2 text-red-600 rounded-md \">\r\n              new\r\n            </p>\r\n          )}\r\n          <p className=\"text-xs text-neutral-600\">\r\n            {isUser ? (\r\n              <IoArrowUpOutline size={15} className=\"rotate-45\" />\r\n            ) : (\r\n              <IoArrowDownOutline size={15} className=\"rotate-45\" />\r\n            )}\r\n          </p>\r\n        </div>\r\n      </div>\r\n      {/*<div className=\"flex h-[90px] bg-green-100 flex items-center text-primary-800\">*/}\r\n      {/*  <HiOutlineArrowNarrowUp size={27} />*/}\r\n      {/*</div>*/}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatUser;\r\n","import React from \"react\";\r\nimport { IoCallOutline, IoLocationOutline } from \"react-icons/io5\";\r\nimport { map, uniqueId } from \"lodash\";\r\n\r\nconst ProductData = ({ data, translations }) => {\r\n  if (!data) return null;\r\n  const organization = data?.organization;\r\n  const user = data?.user;\r\n  const whois = organization\r\n    ? translations.tashkilot + \": \" + organization?.name\r\n    : translations.foydalanuvchi +\r\n      \": \" +\r\n      user?.firstname +\r\n      \" \" +\r\n      user?.lastname;\r\n  return (\r\n    <>\r\n      <h2 className=\"font-amazonbold py-2 text-lg border-y border-neutral-300\">\r\n        {whois}\r\n      </h2>\r\n      <h3 className=\"font-amazonbold py-1\">{data?.name}</h3>\r\n      <h4 className=\"py-2 mb-2\">{data?.description}</h4>\r\n      <p className=\"flex items-center text-neutral-600 text-sm\">\r\n        <span className=\"mr-2\">\r\n          <IoLocationOutline />\r\n        </span>\r\n        <span>\r\n          {data?.region?.name}, {data?.district?.name}\r\n        </span>\r\n      </p>\r\n      <p className=\"flex items-center text-neutral-600 text-sm\">\r\n        <span className=\"mr-2\">\r\n          <IoCallOutline />\r\n        </span>\r\n        <span>{data?.organization?.phone || data?.user?.phone}</span>\r\n      </p>\r\n      <p className=\"flex items-center text-neutral-600 text-sm\">\r\n        <span className=\"pr-2 font-amazonbold\">\r\n          {translations.savdo_turi}:{\" \"}\r\n        </span>{\" \"}\r\n        <span>\r\n          {data?.tradetypes &&\r\n            map(data?.tradetypes, (tradetype) => tradetype?.name + \", \")}\r\n        </span>\r\n      </p>\r\n      <p className=\"flex items-center text-neutral-600 text-sm\">\r\n        <span className=\"pr-2 font-amazonbold\">\r\n          {translations.kategoriya}:{\" \"}\r\n        </span>{\" \"}\r\n        <span>\r\n          {data?.categories &&\r\n            map(data?.categories, (category) => category?.name + \", \")}\r\n        </span>\r\n      </p>\r\n      <p className=\"flex items-center text-neutral-600 text-sm\">\r\n        <span className=\"pr-2 font-amazonbold\">\r\n          {translations.kategoriya_turi}:{\" \"}\r\n        </span>{\" \"}\r\n        <span>\r\n          {data?.subcategories &&\r\n            map(data?.subcategories, (subcategory) => subcategory?.name + \", \")}\r\n        </span>\r\n      </p>\r\n      <p className=\"flex items-center justify-between text-neutral-600 text-lg py-2 my-2 border-y border-neutral-300\">\r\n        <span className=\"pr-2 font-amazonbold\">{translations.narxi}: </span>{\" \"}\r\n        <span className=\"text-amber-500 font-amazonbold \">\r\n          {data?.minPrice\r\n            ? data?.minPrice?.toLocaleString(\"ru-RU\") + \" - \"\r\n            : \"\"}{\" \"}\r\n          {data?.maxPrice?.toLocaleString(\"ru-RU\")} {data?.currency}\r\n        </span>\r\n      </p>\r\n      <div className=\"grid grid-cols-2 gap-4\">\r\n        {data?.images &&\r\n          map(data?.images, (image) => (\r\n            <div\r\n              key={uniqueId(\"productImage\")}\r\n              className=\"w-full flex items-center justify-center rounded bg-white-900 \"\r\n            >\r\n              <img className=\"\" alt=\"alotrade\" src={image} />\r\n            </div>\r\n          ))}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ProductData;\r\n","import React from \"react\";\r\n\r\nconst ChatIncomingMessage = ({ message: Message }) => {\r\n  const { message, user, createdAt } = Message;\r\n  return (\r\n    <div className=\"w-full flex flex-row my-3\">\r\n      <div className=\" w-16 flex justify-center items-center\">\r\n        {user?.image ? (\r\n          <img\r\n            src={user.image}\r\n            alt=\"Alotarade\"\r\n            className=\"w-12 h-12 rounded-full\"\r\n          />\r\n        ) : (\r\n          <div className=\"w-12 h-12 rounded-full uppercase flex items-center justify-center bg-white-900\">\r\n            {user?.firstname[0]}\r\n            {user?.lastname[0]}\r\n          </div>\r\n        )}\r\n      </div>\r\n      <div className=\"w-2/3 bg-white-900 rounded shadow-md px-2\">\r\n        <div className=\"flex justify-between\">\r\n          <h3 className=\"font-amazonbold text-neutral-500 text-[15px]\">\r\n            {user?.firstname} {user?.lastname}\r\n          </h3>\r\n          <p className=\"text-[12px] text-neutral-500 text-end\">\r\n            {new Date(createdAt).toLocaleTimeString().slice(0, 5)}{\" \"}\r\n            {new Date(createdAt).toLocaleDateString()}\r\n          </p>\r\n        </div>\r\n        <p className=\"text-neutral-600\">{message}</p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatIncomingMessage;\r\n","import React from \"react\";\r\n\r\nconst ChatIncomingMessage = ({ message: Message }) => {\r\n  const { message, user, createdAt } = Message;\r\n  return (\r\n    <div className=\"w-full flex flex-row my-3 justify-end\">\r\n      <div className=\"w-2/3 bg-white-900 rounded shadow-md px-2\">\r\n        <div className=\"flex justify-between\">\r\n          <h3 className=\"font-amazonbold text-neutral-500 text-[15px]\">\r\n            {user?.firstname} {user?.lastname}\r\n          </h3>\r\n          <p className=\"text-[12px] text-neutral-500 text-end\">\r\n            {new Date(createdAt).toLocaleTimeString().slice(0, 5)}{\" \"}\r\n            {new Date(createdAt).toLocaleDateString()}\r\n          </p>\r\n        </div>\r\n        <p className=\"text-neutral-600\">{message}</p>\r\n      </div>\r\n      <div className=\" w-16 flex justify-center items-center\">\r\n        {user?.image ? (\r\n          <img\r\n            src={user.image}\r\n            alt=\"Alotarade\"\r\n            className=\"w-12 h-12 rounded-full\"\r\n          />\r\n        ) : (\r\n          <div className=\"w-12 h-12 rounded-full uppercase flex items-center justify-center bg-white-900\">\r\n            {user?.firstname[0]}\r\n            {user?.lastname[0]}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatIncomingMessage;\r\n","import React from \"react\";\r\nimport { IoSend } from \"react-icons/io5\";\r\nimport { getTranslations } from \"../../translation\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nconst ChatInput = ({ changeHandler, enterHandler, sendHandler, value }) => {\r\n  const { t } = useTranslation();\r\n  const { xabarni_kiriting } = getTranslations(t);\r\n  return (\r\n    <div className=\"bg-white-900 w-full h-[5rem] px-10 py-5 flex\">\r\n      <input\r\n        value={value}\r\n        onKeyUp={enterHandler}\r\n        onChange={changeHandler}\r\n        placeholder={xabarni_kiriting}\r\n        className=\"border rounded-l w-full py-1 px-3 outline-0\"\r\n      />\r\n      <button\r\n        onClick={sendHandler}\r\n        className=\"px-3 border-r border-y text-neutral-500 rounded-r\"\r\n      >\r\n        <IoSend />\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatInput;\r\n","import io from \"socket.io-client\";\r\nconst baseURL =\r\n  process.env.REACT_APP_API_SOCKET_ENDPOINT || \"http://localhost:8080\";\r\n\r\nconst socket = io(baseURL);\r\nconst token = JSON.parse(localStorage.getItem(\"_grecaptcha\"));\r\nsocket.auth = { token };\r\n\r\nexport default socket;\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport ChatUser from \"../../../Components/OfferChat/ChatUser\";\r\nimport ProductData from \"../../../Components/OfferChat/ProductData\";\r\nimport ChatIncomingMessage from \"../../../Components/OfferChat/ChatIncomingMessage\";\r\nimport ChatSendingMessage from \"../../../Components/OfferChat/ChatSendingMessage\";\r\nimport ChatInput from \"../../../Components/OfferChat/ChatInput\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { getProductByOffer } from \"../Products/productSlice\";\r\nimport { getOrderByOffer } from \"../Orders/orderSlice\";\r\nimport { universalToast } from \"../../../Components/ToastMessages/ToastMessages\";\r\nimport {\r\n  createMessage,\r\n  createOffer,\r\n  getMessagesByOffer,\r\n  getOfferById,\r\n  getOfferByUser,\r\n  getOffers,\r\n  setAllMessages,\r\n} from \"./offerSlice\";\r\nimport { map, uniqueId } from \"lodash\";\r\nimport socket from \"../../../Config/socket\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { getTranslations } from \"../../../translation\";\r\n\r\nconst Offers = () => {\r\n  const dispatch = useDispatch();\r\n  const location = useLocation();\r\n  const { t } = useTranslation([\"common\"]);\r\n  const translations = getTranslations(t);\r\n\r\n  const messagesEndRef = useRef(null);\r\n  const {\r\n    userData: { user },\r\n  } = useSelector((state) => state.login);\r\n\r\n  const { offers, messages } = useSelector((state) => state.offers);\r\n\r\n  const [id, setId] = useState(null);\r\n  const [type, setType] = useState(null);\r\n  const [currentProduct, setCurrentProduct] = useState(null);\r\n  const [currentOrder, setCurrentOrder] = useState(null);\r\n  const [message, setMessage] = useState(\"\");\r\n  const [offer, setOffer] = useState(null);\r\n  const [filter, setFilter] = useState(null);\r\n\r\n  const changeFilter = (e) => {\r\n    const val = e.target.name;\r\n    val === filter ? setFilter(null) : setFilter(e.target.name);\r\n  };\r\n\r\n  const changeHandler = (e) => {\r\n    setMessage(e.target.value);\r\n  };\r\n\r\n  const enterHandler = (e) => {\r\n    if (e.key === \"Enter\") {\r\n      sendHandler();\r\n    }\r\n  };\r\n\r\n  const sendHandler = () => {\r\n    if (message.length === 0) {\r\n      return universalToast(\"Внимание! Сообщение не введено\", \"warning\");\r\n    }\r\n\r\n    if (!currentProduct && !currentOrder)\r\n      return universalToast(\r\n        translations.mahsulot_yoki_buyurtma_tanlanmagan,\r\n        \"warning\"\r\n      );\r\n\r\n    const data = {\r\n      message,\r\n      product: currentProduct ? currentProduct._id : undefined,\r\n      order: currentOrder ? currentOrder._id : undefined,\r\n      offer: offer ? offer._id : undefined,\r\n    };\r\n    dispatch(offer ? createMessage(data) : createOffer(data)).then(\r\n      ({ error, payload: { offer, message } }) => {\r\n        if (!error) {\r\n          setMessage(\"\");\r\n          setOffer(offer);\r\n          newMessageHasBeenSend({\r\n            recipient: message?.recipient,\r\n          });\r\n        }\r\n      }\r\n    );\r\n  };\r\n\r\n  const changeOffer = (offer) => {\r\n    if (offer.order) {\r\n      setType(\"order\");\r\n      setId(offer.order._id);\r\n    }\r\n    if (offer.product) {\r\n      offer.product && setType(\"product\");\r\n      offer.product && setId(offer.product._id);\r\n    }\r\n    setOffer(offer);\r\n  };\r\n\r\n  const isUser = (offererUser) => {\r\n    return offererUser?._id === user?._id;\r\n  };\r\n\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  };\r\n\r\n  const newMessageHasBeenSend = ({ recipient }) => {\r\n    socket.emit(\"sendMessage\", { recipient });\r\n  };\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  useEffect(() => {\r\n    socket.on(\"error\", ({ id, message }) => {\r\n      user._id === id && universalToast(message, \"error\");\r\n    });\r\n    socket.on(\"newMessage\", ({ recipient }) => {\r\n      const isUser = recipient === user._id;\r\n      isUser && dispatch(getOffers());\r\n      isUser &&\r\n        offer &&\r\n        dispatch(getMessagesByOffer({ id: offer._id })).then(({ error }) => {\r\n          if (!error) {\r\n            dispatch(getOfferById({ id: offer._id }));\r\n          }\r\n        });\r\n    });\r\n  }, [user, dispatch, offer]);\r\n\r\n  useEffect(() => {\r\n    if (location.state) {\r\n      const type = location.state.type;\r\n      const id = location.state.id;\r\n      setId(id);\r\n      setType(type);\r\n      const data = { [type]: id };\r\n      dispatch(getOfferByUser(data)).then(({ error, payload: { offer } }) => {\r\n        if (!error) {\r\n          setOffer(offer);\r\n          !offer && dispatch(setAllMessages({ messages: [] }));\r\n        }\r\n      });\r\n    } else {\r\n      dispatch(setAllMessages({ messages: [] }));\r\n      setCurrentOrder(null);\r\n      setCurrentProduct(null);\r\n    }\r\n  }, [location.state, dispatch]);\r\n\r\n  useEffect(() => {\r\n    if (id) {\r\n      if (type === \"product\") {\r\n        dispatch(getProductByOffer({ id })).then(\r\n          ({ error, payload: { product } }) => {\r\n            if (!error) {\r\n              setCurrentOrder(null);\r\n              setCurrentProduct(product);\r\n            }\r\n          }\r\n        );\r\n      }\r\n      if (type === \"order\") {\r\n        dispatch(getOrderByOffer({ id })).then(\r\n          ({ error, payload: { order } }) => {\r\n            if (!error) {\r\n              setCurrentProduct(null);\r\n              setCurrentOrder(order);\r\n            }\r\n          }\r\n        );\r\n      }\r\n    }\r\n  }, [id, type, dispatch]);\r\n\r\n  useEffect(() => {\r\n    dispatch(getOffers({ filter }));\r\n  }, [dispatch, filter, user]);\r\n\r\n  useEffect(() => {\r\n    offer &&\r\n      dispatch(getMessagesByOffer({ id: offer._id })).then(({ error }) => {\r\n        if (!error) {\r\n          dispatch(getOfferById({ id: offer._id }));\r\n        }\r\n      });\r\n  }, [dispatch, offer]);\r\n\r\n  return (\r\n    <div className=\"flex flex-row h-full w-full \">\r\n      <div className=\"max-w-[400px] min-w-[300px] w-1/4 h-full flex flex-col\">\r\n        <div>\r\n          <button\r\n            onClick={changeFilter}\r\n            name=\"offererUser\"\r\n            className={`w-1/2 py-2 ${\r\n              filter === \"offererUser\" ? \"bg-primary-700\" : \"bg-primary-800\"\r\n            } text-white-900 border-r border-white-900`}\r\n          >\r\n            {translations.chiquvchi_xabar}\r\n          </button>\r\n          <button\r\n            onClick={changeFilter}\r\n            name=\"user\"\r\n            className={`w-1/2 py-2 ${\r\n              filter === \"user\" ? \"bg-primary-700\" : \"bg-primary-800\"\r\n            } text-white-900`}\r\n          >\r\n            {translations.kiruvchi_xabar}\r\n          </button>\r\n        </div>\r\n        <div className=\"h-full w-full overflow-scroll px-3\">\r\n          {map(offers, (offer) => (\r\n            <ChatUser\r\n              changeOffer={() => changeOffer(offer)}\r\n              user={user}\r\n              key={uniqueId(\"chatUser\")}\r\n              offer={offer}\r\n            />\r\n          ))}\r\n        </div>\r\n      </div>\r\n      <div className=\"h-full w-1/2 relative bg-neutral-200 flex flex-col\">\r\n        <div className=\"h-full overflow-scroll\">\r\n          {map(messages, (message) =>\r\n            isUser(message.user) ? (\r\n              <ChatSendingMessage key={uniqueId(\"message\")} message={message} />\r\n            ) : (\r\n              <ChatIncomingMessage\r\n                key={uniqueId(\"message\")}\r\n                message={message}\r\n              />\r\n            )\r\n          )}\r\n          <div className=\"\" ref={messagesEndRef} />\r\n        </div>\r\n        <ChatInput\r\n          value={message}\r\n          changeHandler={changeHandler}\r\n          enterHandler={enterHandler}\r\n          sendHandler={sendHandler}\r\n        />\r\n      </div>\r\n      <div className=\"max-w-[400px] min-w-[300px] w-1/4 h-full overflow-scroll p-4 bg-neutral-100\">\r\n        <ProductData\r\n          data={currentProduct || currentOrder}\r\n          translations={translations}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Offers;\r\n"],"names":["offer","user","changeOffer","_id","order","product","messages","createdAt","offererUser","name","message","isRead","chatUser","image","images","isUser","isNew","onClick","className","alt","src","Date","toLocaleDateString","size","data","translations","organization","whois","tashkilot","foydalanuvchi","firstname","lastname","description","region","district","phone","savdo_turi","tradetypes","map","tradetype","kategoriya","categories","category","kategoriya_turi","subcategories","subcategory","narxi","minPrice","toLocaleString","maxPrice","currency","uniqueId","Message","toLocaleTimeString","slice","changeHandler","enterHandler","sendHandler","value","t","useTranslation","xabarni_kiriting","getTranslations","onKeyUp","onChange","placeholder","socket","io","process","token","JSON","parse","localStorage","getItem","auth","dispatch","useDispatch","location","useLocation","messagesEndRef","useRef","useSelector","state","login","userData","offers","useState","id","setId","type","setType","currentProduct","setCurrentProduct","currentOrder","setCurrentOrder","setMessage","setOffer","filter","setFilter","changeFilter","e","val","target","length","universalToast","mahsulot_yoki_buyurtma_tanlanmagan","undefined","createMessage","createOffer","then","error","payload","newMessageHasBeenSend","recipient","useEffect","current","scrollIntoView","behavior","scrollToBottom","getOffers","getMessagesByOffer","getOfferById","getOfferByUser","setAllMessages","getProductByOffer","getOrderByOffer","chiquvchi_xabar","kiruvchi_xabar","ChatSendingMessage","ref","key"],"sourceRoot":""}